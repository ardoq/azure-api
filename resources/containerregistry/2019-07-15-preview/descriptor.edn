{:scheme "https", :host "azure.local", :info {:description "Metadata API definition for the Azure Container Registry runtime", :title "Azure Container Registry", :version "2019-07-15-preview"}, :ops {:GetAcrAccessTokenFromLogin {:path "/oauth2/token", :description "Exchange Username, Password and Scope an ACR Access Token", :parameters [{:description "Indicates the name of your Azure container registry.", :in "query", :name "service", :required true, :type "string"} {:description "Expected to be a valid scope, and can be specified more than once for multiple scope requests. You can obtain this from the Www-Authenticate response header from the challenge.", :in "query", :name "scope", :required true, :type "string"}], :verb :get}, :GetAcrRefreshTokenFromExchange {:path "/oauth2/exchange", :description "Exchange AAD tokens for an ACR refresh Token", :parameters [#:reference{:parameters "Grant_type"} #:reference{:parameters "Service"} #:reference{:parameters "Tenant"} #:reference{:parameters "RefreshToken"} #:reference{:parameters "AccessToken"}], :verb :post}, :GetAcrAccessToken {:path "/oauth2/token", :description "Exchange ACR Refresh token for an ACR Access Token", :parameters [{:description "Grant type is expected to be refresh_token", :enum ["refresh_token"], :in "formData", :name "grant_type", :required true, :type "string"} #:reference{:parameters "Service"} {:description "Which is expected to be a valid scope, and can be specified more than once for multiple scope requests. You obtained this from the Www-Authenticate response header from the challenge.", :in "formData", :name "scope", :required true, :type "string"} {:description "Must be a valid ACR refresh token", :in "formData", :name "refresh_token", :required true, :type "string"}], :verb :post}, :GetAcrRepositories {:path "/acr/v1/_catalog", :description "List repositories", :parameters [#:reference{:parameters "QueryLast"} #:reference{:parameters "QueryNum"}], :verb :get}, :GetManifest {:path "/v2/{name}/manifests/{reference}", :description "Pulls the image manifest file associated with the specified name and reference. Reference may be a tag or a digest", :parameters [#:reference{:parameters "ImageName"} #:reference{:parameters "ImageReference"} {:description "Accept header string delimited by comma. For example, application/vnd.docker.distribution.manifest.v2+json", :in "header", :name "accept", :required false, :type "string"}], :verb :get}, :UpdateAcrTagAttributes {:path "/acr/v1/{name}/_tags/{reference}", :description "Update tag attributes", :parameters [#:reference{:parameters "ImageName"} #:reference{:parameters "ManifestReference"} #:reference{:parameters "RepoValue"}], :verb :patch}, :GetDockerRegistryV2Support {:path "/v2/", :description "Tells whether this Docker Registry instance supports Docker Registry HTTP API v2", :parameters nil, :verb :get}, :GetTagList {:path "/v2/{name}/tags/list", :description "Fetch the tags under the repository identified by name", :parameters [#:reference{:parameters "ImageName"}], :verb :get}, :GetAcrRepositoryAttributes {:path "/acr/v1/{name}", :description "Get repository attributes", :parameters [#:reference{:parameters "ImageName"}], :verb :get}, :GetRepositories {:path "/v2/_catalog", :description "List repositories", :parameters [#:reference{:parameters "QueryLast"} #:reference{:parameters "QueryNum"}], :verb :get}, :CreateManifest {:path "/v2/{name}/manifests/{reference}", :description "Put the manifest identified by `name` and `reference` where `reference` can be a tag or digest.", :parameters [#:reference{:parameters "ImageName"} #:reference{:parameters "ImageReference"} #:reference{:parameters "ManifestBody"}], :verb :put}, :UpdateAcrRepositoryAttributes {:path "/acr/v1/{name}", :description "Update the attribute identified by `name` where `reference` is the name of the repository.", :parameters [#:reference{:parameters "ImageName"} {:description "Repository attribute value", :in "body", :name "value", :required false, :schema #:reference{:definitions "ChangeableAttributes"}}], :verb :patch}, :DeleteAcrRepository {:path "/acr/v1/{name}", :description "Delete the repository identified by `name`", :parameters [#:reference{:parameters "ImageName"}], :verb :delete}, :DeleteAcrTag {:path "/acr/v1/{name}/_tags/{reference}", :description "Delete tag", :parameters [#:reference{:parameters "ImageName"} #:reference{:parameters "ManifestReference"}], :verb :delete}, :GetAcrTagAttributes {:path "/acr/v1/{name}/_tags/{reference}", :description "Get tag attributes by tag", :parameters [#:reference{:parameters "ImageName"} #:reference{:parameters "ManifestReference"}], :verb :get}, :UpdateAcrManifestAttributes {:path "/acr/v1/{name}/_manifests/{reference}", :description "Update attributes of a manifest", :parameters [#:reference{:parameters "ImageName"} #:reference{:parameters "ImageReference"} #:reference{:parameters "RepoValue"}], :verb :patch}, :DeleteManifest {:path "/v2/{name}/manifests/{reference}", :description "Delete the manifest identified by `name` and `reference`. Note that a manifest can _only_ be deleted by `digest`.", :parameters [#:reference{:parameters "ImageName"} #:reference{:parameters "ImageReference"}], :verb :delete}, :GetAcrTags {:path "/acr/v1/{name}/_tags", :description "List tags of a repository", :parameters [#:reference{:parameters "ImageName"} #:reference{:parameters "QueryLast"} #:reference{:parameters "QueryNum"} #:reference{:parameters "QueryOrderBy"} #:reference{:parameters "QueryDigest"}], :verb :get}, :GetAcrManifestAttributes {:path "/acr/v1/{name}/_manifests/{reference}", :description "Get manifest attributes", :parameters [#:reference{:parameters "ImageName"} #:reference{:parameters "ImageReference"}], :verb :get}, :GetAcrManifests {:path "/acr/v1/{name}/_manifests", :description "List manifests of a repository", :parameters [#:reference{:parameters "ImageName"} #:reference{:parameters "QueryLast"} #:reference{:parameters "QueryNum"} #:reference{:parameters "QueryOrderBy"}], :verb :get}}, :parameters {:ImageReference {:description "A tag or a digest, pointing to a specific image", :in "path", :name "reference", :required true, :type "string", :x-ms-parameter-location "method"}, :QueryLast {:description "Query parameter for the last item in previous query. Result set will include values lexically after last.", :in "query", :name "last", :required false, :type "string", :x-ms-parameter-location "method"}, :Url {:description "Registry login URL", :in "path", :name "url", :required true, :type "string", :x-ms-client-name "loginUri", :x-ms-parameter-location "client", :x-ms-skip-url-encoding true}, :Service {:description "Indicates the name of your Azure container registry.", :in "formData", :name "service", :required true, :type "string", :x-ms-parameter-location "method"}, :ManifestReference {:description "Tag or digest of the target manifest", :in "path", :name "reference", :required true, :type "string", :x-ms-parameter-location "method"}, :ManifestBody {:description "Manifest body, can take v1 or v2 values depending on accept header", :in "body", :name "payload", :required true, :schema #:reference{:definitions "Manifest"}, :x-ms-parameter-location "method"}, :QueryNum {:description "query parameter for max number of items", :in "query", :name "n", :required false, :type "integer", :x-ms-parameter-location "method"}, :Tenant {:description "AAD tenant associated to the AAD credentials.", :in "formData", :name "tenant", :required false, :type "string", :x-ms-parameter-location "method"}, :RefreshToken {:description "AAD refresh token, mandatory when grant_type is access_token_refresh_token or refresh_token", :in "formData", :name "refresh_token", :required false, :type "string", :x-ms-parameter-location "method"}, :property {:description "Name of the property", :in "path", :name "property", :required true, :type "string", :x-ms-parameter-location "method"}, :QueryOrderBy {:description "orderby query parameter", :in "query", :name "orderby", :required false, :type "string", :x-ms-parameter-location "method"}, :QueryDigest {:description "filter by digest", :in "query", :name "digest", :required false, :type "string", :x-ms-parameter-location "method"}, :Scope {:description "Which is expected to be a valid scope, and can be specified more than once for multiple scope requests. You can obtain this from the Www-Authenticate response header from the challenge.", :in "formData", :name "scope", :required true, :type "string", :x-ms-parameter-location "method"}, :AccessToken {:description "AAD access token, mandatory when grant_type is access_token_refresh_token or access_token.", :in "formData", :name "access_token", :required false, :type "string", :x-ms-parameter-location "method"}, :Digest {:description "Digest of a desired BLOB", :in "path", :name "digest", :required true, :type "string", :x-ms-parameter-location "method"}, :RepoValue {:description "Repository attribute value", :in "body", :name "value", :required false, :schema #:reference{:definitions "ChangeableAttributes"}, :x-ms-parameter-location "method"}, :ImageName {:description "Name of the image (including the namespace)", :in "path", :name "name", :required true, :type "string", :x-ms-parameter-location "method"}, :Grant_type {:description "Can take a value of access_token_refresh_token, or access_token, or refresh_token", :enum ["access_token_refresh_token" "access_token" "refresh_token"], :in "formData", :name "grant_type", :required true, :type "string", :x-ms-parameter-location "method"}, :metadata {:description "Name of the metadata", :in "path", :name "metadata", :required true, :type "string", :x-ms-parameter-location "method"}}, :definitions {:AcrTagAttributesBase {:description "Tag attribute details", :example {:changeableAttributes {:deleteEnabled true, :listEnabled true, :readEnabled true, :writeEnabled true}, :createdTime "2018-08-10T17:28:44.1082945Z", :digest "sha256:0873c923e00e0fd2ba78041bfb64a105e1ecb7678916d1f7776311e45bf5634b", :lastUpdateTime "2018-08-10T17:28:44.1082945Z", :name "tagname", :signed true}, :properties {:changeableAttributes #:reference{:definitions "ChangeableAttributes"}, :createdTime {:description "Tag created time", :type "string"}, :digest {:description "Tag digest", :type "string"}, :lastUpdateTime {:description "Tag last update time", :type "string"}, :name {:description "Tag name", :type "string"}, :signed {:description "Is signed", :type "boolean"}}}, :AcrErrors {:description "Acr error response describing why the operation failed", :properties {:errors {:description "Array of detailed error", :items #:reference{:definitions "AcrErrorInfo"}, :type "array"}}}, :ManifestAttributes_manifest {:description "List of manifest attributes", :example {:quarantineTag "quarantineTag", :references [{:architecture "architecture", :digest "digest", :os "os"} {:architecture "architecture", :digest "digest", :os "os"}]}, :properties {:quarantineTag {:description "Quarantine tag name", :type "string"}, :references {:description "List of manifest attributes details", :items #:reference{:definitions "ManifestAttributes_manifest_references"}, :type "array"}}}, :RefreshToken {:properties {:refresh_token {:description "The refresh token to be used for generating access tokens", :type "string"}}, :type "object"}, :ManifestAttributes_manifest_references {:description "Manifest attributes details", :example {:architecture "architecture", :digest "digest", :os "os"}, :properties {:architecture {:description "CPU architecture", :type "string"}, :digest {:description "Manifest digest", :type "string"}, :os {:description "Operating system", :type "string"}}}, :RepositoryTags {:description "Result of the request to list tags of the image", :example {:name "name", :tags ["tags" "tags"]}, :properties {:name {:description "Name of the image", :type "string"}, :tags {:description "List of tags", :items {:description "Tag name", :type "string"}, :type "array"}}}, :History {:description "A list of unstructured historical data for v1 compatibility", :example {:v1Compatibility "v1 compatibility info"}, :properties {:v1Compatibility {:description "The raw v1 compatibility information", :type "string"}}}, :RepositoryAttributes {:description "Repository attributes", :example {:changeableAttributes {:deleteEnabled true, :listEnabled true, :readEnabled true, :writeEnabled true}, :createdTime "2018-09-07T16:30:46.6583219Z", :imageName "imageName", :lastUpdateTime "2018-09-07T16:30:46.6583219Z", :manifestCount 2, :registry "registryname.azurecr.io", :tagCount 6}, :properties {:changeableAttributes #:reference{:definitions "ChangeableAttributes"}, :createdTime {:description "Image created time", :type "string"}, :imageName {:description "Image name", :type "string"}, :lastUpdateTime {:description "Image last update time", :type "string"}, :manifestCount {:description "Number of the manifests", :type "integer"}, :registry {:description "Registry name", :type "string"}, :tagCount {:description "Number of the tags", :type "integer"}}, :type "object"}, :AcrManifestAttributesBase {:description "Manifest details", :example {:tags ["tags" "tags"], :configMediaType "configMediaType", :architecture "architecture", :digest "digest", :mediaType "mediaType", :changeableAttributes {:deleteEnabled true, :listEnabled true, :readEnabled true, :writeEnabled true}, :createdTime "createdTime", :lastUpdateTime "lastUpdateTime", :os "os", :imageSize 2401606}, :properties {:tags {:description "List of tags", :items {:description "Tag name", :type "string"}, :type "array"}, :configMediaType {:description "Config blob media type", :type "string"}, :architecture {:description "CPU architecture", :type "string"}, :digest {:description "Manifest", :type "string"}, :mediaType {:description "Media type", :type "string"}, :changeableAttributes #:reference{:definitions "ChangeableAttributes"}, :createdTime {:description "Created time", :type "string"}, :lastUpdateTime {:description "Last update time", :type "string"}, :os {:description "Operating system", :type "string"}, :imageSize {:description "Image size", :type "integer"}}, :type "object"}, :Manifest {:description "Returns the requested manifest file", :example {:config {:digest "sha256:6d1ef012b5674ad8a127ecfa9b5e6f5178d171b90ee462846974177fd9bdd39f", :mediaType "application/vnd.docker.container.image.v1+json", :size 1512}, :layers [{:digest "sha256:5d20c808ce198565ff70b3ed23a991dd49afac45dece63474b27ce6ed036adc6", :mediaType "application/vnd.docker.image.rootfs.diff.tar.gzip", :size 2107098}], :mediaType "application/vnd.docker.distribution.manifest.v2+json", :schemaVersion 2}, :properties {:architecture {:description "CPU architecture", :type "string"}, :config #:reference{:definitions "V2Descriptor"}, :name {:description "Image name", :type "string"}, :history {:description "Image history", :items #:reference{:definitions "History"}, :type "array"}, :mediaType {:description "Media type usually application/vnd.docker.distribution.manifest.v2+json if this is in the accept header", :type "string"}, :signatures {:description "Image signature", :items #:reference{:definitions "ImageSignature"}, :type "array"}, :layers {:description "List of V2 image layer information", :items #:reference{:definitions "V2Descriptor"}, :type "array"}, :tag {:description "Image tag", :type "string"}, :fsLayers {:description "List of layer information", :items #:reference{:definitions "FsLayer"}, :type "array"}, :schemaVersion {:description "Schema version", :type "integer"}}}, :AcrManifests {:description "Manifest attributes", :example {:imageName "imageName", :manifests [{:tags ["tags" "tags"], :configMediaType "configMediaType", :architecture "architecture", :digest "digest", :mediaType "mediaType", :changeableAttributes {:deleteEnabled true, :listEnabled true, :quarantineDetails "quarantineDetails", :quarantineState "quarantineState", :readEnabled true, :writeEnabled true}, :createdTime "createdTime", :lastUpdateTime "lastUpdateTime", :os "os", :imageSize 2401606} {:tags ["tags" "tags"], :configMediaType "configMediaType", :architecture "architecture", :digest "digest", :mediaType "mediaType", :changeableAttributes {:deleteEnabled true, :listEnabled true, :quarantineDetails "quarantineDetails", :quarantineState "quarantineState", :readEnabled true, :writeEnabled true}, :createdTime "createdTime", :lastUpdateTime "lastUpdateTime", :os "os", :imageSize 2401606}], :registry "registry"}, :properties {:imageName {:description "Image name", :type "string"}, :manifests {:description "List of manifests", :items #:reference{:definitions "AcrManifestAttributesBase"}, :type "array", :x-ms-client-name "ManifestsAttributes"}, :registry {:description "Registry name", :type "string"}}}, :ManifestChangeableAttributes {:description "Changeable attributes", :example {:deleteEnabled true, :listEnabled true, :quarantineDetails "quarantineDetails", :quarantineState "quarantineState", :readEnabled true, :writeEnabled true}, :properties {:deleteEnabled {:description "Delete enabled", :type "boolean"}, :listEnabled {:description "List enabled", :type "boolean"}, :quarantineDetails {:description "Quarantine details", :type "string"}, :quarantineState {:description "Quarantine state", :type "string"}, :readEnabled {:description "Read enabled", :type "boolean"}, :writeEnabled {:description "Write enabled", :type "boolean"}}}, :AccessToken {:properties {:access_token {:description "The access token for performing authenticated requests", :type "string"}}, :type "object"}, :AcrManifestAttributes {:description "Manifest attributes details", :example {:imageName "nanoserver", :manifest {:tags ["4.7.2-20180905-nanoserver-1803"], :configMediaType "application/vnd.docker.container.image.v1+json", :architecture "amd64", :digest "sha256:110d2b6c84592561338aa040b1b14b7ab81c2f9edbd564c2285dd7d70d777086", :mediaType "application/vnd.docker.distribution.manifest.v2+json", :changeableAttributes {:deleteEnabled true, :listEnabled true, :readEnabled true, :writeEnabled true}, :createdTime "2018-09-06T06:17:20.9983915Z", :lastUpdateTime "2018-09-06T06:17:20.9983915Z", :os "windows", :imageSize 2401606}, :registry "acrapi.azurecr-test.io"}, :properties {:imageName {:description "Image name", :type "string"}, :manifest #:reference{:definitions "AcrManifestAttributesBase"}, :registry {:description "Registry name", :type "string"}}}, :AcrRepositoryTags {:description "List of tag details", :example {:imageName "imageName", :registry "registry", :tags [{:changeableAttributes {:deleteEnabled true, :listEnabled true, :readEnabled true, :writeEnabled true}, :createdTime "createdTime", :digest "digest", :lastUpdateTime "lastUpdateTime", :name "name", :signed true} {:changeableAttributes {:deleteEnabled true, :listEnabled true, :readEnabled true, :writeEnabled true}, :createdTime "createdTime", :digest "digest", :lastUpdateTime "lastUpdateTime", :name "name", :signed true}]}, :properties {:imageName {:description "Image name", :type "string"}, :registry {:description "Registry name", :type "string"}, :tags {:description "List of tag attribute details", :items #:reference{:definitions "AcrTagAttributesBase"}, :type "array", :x-ms-client-name "TagsAttributes"}}}, :Repositories {:description "List of repositories", :example {:repositories ["production/alpine" "testing/alpine"]}, :properties {:repositories {:description "Repository names", :items {:type "string"}, :type "array", :x-ms-client-name "Names"}}}, :AcrTagAttributes {:description "Tag attributes", :example {:imageName "imageName", :registry "registry", :tag {:changeableAttributes {:deleteEnabled true, :listEnabled true, :readEnabled true, :writeEnabled true}, :createdTime "createdTime", :digest "digest", :lastUpdateTime "lastUpdateTime", :name "name", :signed true}}, :properties {:imageName {:description "Image name", :type "string"}, :registry {:description "Registry name", :type "string"}, :tag #:reference{:definitions "AcrTagAttributesBase"}}}, :V2Descriptor {:description "Docker V2 image layer descriptor including config and layers", :example {:digest "sha256:5d20c808ce198565ff70b3ed23a991dd49afac45dece63474b27ce6ed036adc6", :mediaType "application/vnd.docker.image.rootfs.diff.tar.gzip", :size 2107098}, :properties {:digest {:description "Layer digest", :type "string"}, :mediaType {:description "Layer media type", :type "string"}, :size {:description "Layer size", :type "integer"}}}, :TagAttributes {:description "Tag attributes", :example {:imageName "imageName", :registry "registry", :tag {:signatureRecord "signatureRecord"}}, :properties {:imageName {:description "Image name", :type "string"}, :registry {:description "Registry name", :type "string"}, :tag #:reference{:definitions "TagAttributes_tag"}}}, :TagAttributes_tag {:description "Tag", :example {:signatureRecord "signatureRecord"}, :properties {:signatureRecord {:description "SignatureRecord value", :type "string"}}}, :FsLayer {:description "Image layer information", :example {:blobSum "sha256:1f7d468f830cb0ed4beb8edc9438f18096e8c682e56a35242f60e6c61b718b30"}, :properties {:blobSum {:description "SHA of an image layer", :type "string"}}}, :ImageSignature {:description "Signature of a signed manifest", :example {:header {:alg "ES256", :jwk {:crv "P-256", :kid "WGXM:EYWQ:DA53:LQUP:BCWG:5RDG:S3ZM:ETH7:VMQS:WWKZ:EWDG:V74Q", :kty "EC", :x "OxZ9k5BVjPZ7jb3BmBD4X0d8MVPJqfF4NeSe8reoqnY", :y "EaCqTe4-vYwhk7qU6Bs2-AeLGOVtCe_-IY2MdE0Vfyc"}}, :protected "eyJmb3JtYXRMZW5ndGgiOjI5ODYsImZvcm1hdFRhaWwiOiJDbjAiLCJ0aW1lIjoiMjAxOC0wOS0yMFQyMzo0MTo1MloifQ", :signature "p73LfotMGD8nNXz2g9YX2XtSllb4GI5-b3vjqP5N0nkv8QXg-r5z_omGiVbOZE2BYG1X_4TIN23l1KSEqsXxOg"}, :properties {:header #:reference{:definitions "JWK"}, :protected {:description "The signed protected header", :type "string"}, :signature {:description "A signature for the image manifest, signed by a libtrust private key", :type "string"}}}, :JWKHeader {:description "JSON web key parameter", :properties {:crv {:description "crv value", :type "string"}, :kid {:description "kid value", :type "string"}, :kty {:description "kty value", :type "string"}, :x {:description "x value", :type "string"}, :y {:description "y value", :type "string"}}}, :DeletedRepository {:description "Deleted repository", :properties {:manifestsDeleted {:description "SHA of the deleted image", :items {:type "string"}, :type "array"}, :tagsDeleted {:description "Tag of the deleted image", :items {:type "string"}, :type "array"}}}, :AcrErrorInfo {:description "Error information", :properties {:code {:description "Error code", :type "string"}, :detail {:description "Error details", :type "object"}, :message {:description "Error message", :type "string"}}}, :JWK {:description "A JSON web signature", :properties {:alg {:description "The algorithm used to sign or encrypt the JWT", :type "string"}, :jwk #:reference{:definitions "JWKHeader"}}}, :ChangeableAttributes {:example {:deleteEnabled true, :listEnabled true, :readEnabled true, :writeEnabled true}, :properties {:deleteEnabled {:description "Delete enabled", :type "boolean"}, :listEnabled {:description "List enabled", :type "boolean"}, :readEnabled {:description "Read enabled", :type "boolean"}, :writeEnabled {:description "Write enabled", :type "boolean"}}}}}